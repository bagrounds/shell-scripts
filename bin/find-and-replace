#!/bin/sh
# find-and-replace
#
# Find all occurances of a pattern within the current directory (recursively)
# and replace them with something else.
#
# Arguments:
# 1: pattern to find
# 2: replacement string
#
# Examples:
# $ find-and-replace string-to-find replacement-string
# $ find-and-replace 'regex\spattern' 'regex-pattern'
#
# Dependencies:
# - grep
# - xargs
# - sed
#
# Tested on:
# - Ubuntu 16.04

# store command line arguments
find=$1
replace=$2

# print message
echo "replace '$find' with '$replace'"

# grep searches each file in ./ (current directory)
# -r tells grep to search recursively (through sub directories)
# -l tells grep to only output the names of the files that contain $find
# | pipes grep's output (file names) into xargs
# xargs uses these file names as extra command line parameters for sed
# sed performs find and replace within each file
# -e is followed by the find and replace expression
# -i tells sed to perform the find and replace in-place, changing the files
grep -rl "$find" ./ | xargs sed -e "s/$find/$replace/g" -i

# exit script gracefully
exit 0

